/* ---------- Global ---------- */
body {
  font-family: Arial, sans-serif;
  background: #f2f4f8;
  display: flex;
  justify-content: center;
  margin: 0;
  padding: 2rem;
  overflow-x: hidden;
}

.card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  width: 100%;
  max-width: 600px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  position: relative;
}

.title {
  font-size: 1.6rem;
  font-weight: bold;
  margin-bottom: 1.2rem;
  text-align: center;
  color: #34495e;
}

.info { margin: 0.5rem 0; font-size: 1.05rem; }

.qibla {
  margin-top: 1.5rem;
  font-size: 1.4rem;
  font-weight: bold;
  color: #2c3e50;
  text-align: center;
}

#map {
  height: 400px;
  margin-top: 1.5rem;
  border-radius: 10px;
  overflow: hidden;
}

.btn {
  padding: 0.5rem 1rem;
  margin: 0.5rem;
  font-size: 1rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
}
.btn-primary { background-color: #3498db; color: white; }
.btn-secondary { background-color: #2ecc71; color: white; }

#language-screen, #info-screen, #details-screen, #main-app { display: none; }

.kaaba-marker { font-size: 32px; }

.center-buttons { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }

.top-right { position: absolute; top: 1rem; right: 1rem; cursor: pointer; font-size: 1.2rem; }

@media (max-width: 480px) {
  .btn { font-size: 1.2rem; padding: 0.75rem 1.2rem; }
  #map { height: 300px; }
}

/* ---------- Social ---------- */
.social-links {
  position: fixed; right: 1rem; bottom: 1rem;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  padding: 0.8rem 1rem;
  display: flex; flex-direction: column; gap: 0.5rem;
  z-index: 9999; font-size: 0.95rem;
}
.social-links a { text-decoration: none; color: #34495e; display: flex; align-items: center; gap: 0.4rem; }
.social-links a:hover { color: #2ecc71; }
.social-links i { font-size: 1.2rem; }

/* ---------- Hide on AR ---------- */
.ar-mode .social-links,
.ar-mode .leaflet-control-container { display: none !important; }

/* ---------- Helpers ---------- */
.hidden { display: none !important; }

/* ---------- Android notice (shrunk) ---------- */
.notice{
  background: #fff6d9;
  border: 1px solid #fde6a8;
  color: #7a5b00;
  border-radius: 10px;
  padding: .5rem .75rem;     /* ↓ smaller padding */
  margin: 0 0 .5rem 0;       /* ↓ smaller margin */
  line-height: 1.35;         /* ↓ slightly tighter */
  font-size: .9rem;          /* ↓ smaller text */
}
@media (max-width: 420px){
  .notice{
    padding: .45rem .6rem;
    margin-bottom: .45rem;
    font-size: .85rem;
    line-height: 1.3;
  }
}

/* ---------- Calibration modal ---------- */
.modal {
  position: fixed; inset: 0; background: rgba(0,0,0,0.55);
  display: grid; place-items: center; z-index: 2000;
}
.modal .modal-content {
  width: min(92vw, 520px);
  max-height: 92vh;          /* ensure on-screen */
  overflow: auto;            /* scroll if needed */
  background: #fff; color: #2c3e50; border-radius: 12px;
  padding: 1.1rem 1rem .85rem; /* ↓ slightly tighter padding */
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  display: flex; flex-direction: column;
}
.modal .modal-content h2 { margin: 0 0 .45rem 0; font-size: 1.2rem; }
.modal .modal-content p  { margin: .25rem 0 .8rem 0; line-height: 1.42; }

/* ---------- Calibration steps (slightly tighter) ---------- */
.calib-steps {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: .6rem;                   /* ↓ smaller gap */
  margin: .4rem 0 .7rem 0;      /* ↓ margins */
}
.calib-step {
  background: #f7f9fc; border: 1px solid #e7eef7; border-radius: 10px;
  padding: .55rem .45rem;       /* ↓ padding */
  display: grid; place-items: center; row-gap: .35rem;
  transition: border-color .2s, box-shadow .2s, background .2s;
}
.calib-step .calib-label { font-size: .82rem; color: #3a4a5a; text-align: center; }
.calib-step.done { border-color: #2ecc71; box-shadow: 0 0 0 2px rgba(46,204,113,.15) inset; background: #f4fff8; }

/* Phone placeholder animation (slightly smaller) */
.calib-anim {
  width: 34px; height: 52px;   /* ↓ smaller */
  border-radius: 8px; border: 2px solid #8aa1b5;
  position: relative; background: linear-gradient(180deg,#fff,#f3f7fb);
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
}
.calib-anim::after {
  content: ''; position: absolute; left: 50%; top: 6px; transform: translateX(-50%);
  width: 12px; height: 4px; border-radius: 3px; background: #c7d4e0;
}
@keyframes yawSpin { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }
.yaw-spin { animation: yawSpin 2.2s linear infinite; }
@keyframes pitchTilt { 0%{transform: rotateX(0) rotateZ(0);} 50%{transform: rotateX(25deg)} 100%{transform: rotateX(0) rotateZ(0);} }
.pitch-tilt { animation: pitchTilt 1.6s ease-in-out infinite; }
@keyframes rollTilt { 0%{transform: rotateZ(0);} 50%{transform: rotateZ(18deg);} 100%{transform: rotateZ(0);} }
.roll-tilt { animation: rollTilt 1.6s ease-in-out infinite; }

/* ---------- Progress & quality (slightly tighter) ---------- */
.calib-progress {
  width: 100%; height: 9px;      /* ↓ height */
  background: #e9eff5; border-radius: 999px; overflow: hidden; margin-bottom: .45rem;
}
.calib-bar {
  height: 100%; width: 0%;
  background: linear-gradient(90deg, #e74c3c 0%, #e67e22 20%, #f1c40f 33%, #f1c40f 66%, #2ecc71 100%);
  transition: width .2s ease-out, filter .2s ease-out;
}
.quality-line { display:flex; align-items:center; gap:.5rem; margin-bottom:.5rem; }
.quality-badge { font-size:.83rem; padding:.22rem .45rem; border-radius:999px; border:1px solid transparent; }
.quality-badge.bad{ background:#ffe9e7; color:#c0392b; border-color:#ffcfc9; }
.quality-badge.ok { background:#fff6df; color:#a37b00; border-color:#ffe9a5; }
.quality-badge.good{ background:#e9fff2; color:#1e8e57; border-color:#c8f1d9; }
.quality-hint{ font-size:.88rem; color:#51606e; }

/* Extra tightening on very small screens to keep button tappable */
@media (max-width: 420px){
  .modal .modal-content{ padding: .9rem .85rem .7rem; }
  .calib-steps{ gap:.5rem; margin:.35rem 0 .55rem 0; }
  .calib-step{ padding:.48rem .4rem; }
  .calib-anim{ width:32px; height:50px; }
  .calib-progress{ height:8px; margin-bottom:.4rem; }
  .quality-line{ gap:.45rem; margin-bottom:.45rem; }
  .quality-badge{ font-size:.8rem; padding:.2rem .42rem; }
  .quality-hint{ font-size:.84rem; }
}

/* ---------- AR view ---------- */
#ar-container { position: fixed; inset: 0; background:#000; z-index:1500; }
#ar-video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
#ar-overlay{ position:absolute; inset:0; pointer-events:none; }

/* Prayer mat (floor) */
#ar-mat {
  position: absolute; left: 50%; top: 65%;
  width: 42vw; max-width: 420px; height: auto;
  transform: translate(-50%, -50%) perspective(800px) rotateX(58deg);
  transform-origin: 50% 85%;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.35));
  opacity: 0.9; pointer-events: none; z-index: 0;
}

/* Arrow */
#ar-arrow{
  position: absolute; left: 50%; top: 50%;
  width: 0; height: 0; transform: translate(-50%, -50%) rotate(0deg);
  border-left: 22px solid transparent; border-right: 22px solid transparent; border-bottom: 48px solid red;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.35));
}
.arrow-red   { border-bottom-color: #e74c3c !important; }
.arrow-yellow{ border-bottom-color: #f1c40f !important; }
.arrow-green { border-bottom-color: #2ecc71 !important; }

/* HUD */
#ar-hud{
  position: absolute; top: .75rem; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.45); color:#fff; padding:.4rem .7rem;
  border-radius: 10px; font-size:.95rem; display:flex; gap:.75rem; backdrop-filter: blur(2px);
}

/* Exit */
.ar-exit{ position: absolute; right: .75rem; top: .75rem; pointer-events: auto; }

/* ---------- Small screens ---------- */
@media (max-width: 420px) {
  #ar-mat { width: 54vw; top: 68%; }
  #ar-arrow { border-left-width: 18px; border-right-width: 18px; border-bottom-width: 40px; }
  #ar-hud { font-size: .9rem; }
}
